<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- 导航栏和页脚组件 -->
    <script src="../components/navbar.js"></script>
    <script src="../components/footer.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary SEO Meta Tags -->
    <title>免费在线文件压缩工具 | 支持PDF、图片、视频压缩 | 小路工具箱</title>
    <meta name="title" content="免费在线文件压缩工具 | 支持PDF、图片、视频压缩 | 小路工具箱">
    <meta name="description" content="专业的在线文件压缩工具，支持PDF文档、图片、视频等多种格式，批量压缩处理，保持原有质量的同时显著减小文件体积。完全免费，无需注册，确保文件安全和隐私。">
    <meta name="keywords" content="文件压缩,PDF压缩,图片压缩,视频压缩,在线压缩,批量压缩,免费压缩工具,文件大小优化,在线文件处理,小路工具箱">
    <meta name="author" content="小路工具箱">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://tools.xiaolu.com/tools/file-compressor.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tools.xiaolu.com/tools/file-compressor.html">
    <meta property="og:title" content="免费在线文件压缩工具 | 支持PDF、图片、视频压缩">
    <meta property="og:description" content="专业的在线文件压缩工具，支持多种格式，批量处理，保持质量的同时显著减小文件体积。完全免费，无需注册！">
    <meta property="og:image" content="https://tools.xiaolu.com/images/file-compressor-og.png">
    <meta property="og:site_name" content="小路工具箱">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:locale:alternate" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tools.xiaolu.com/tools/file-compressor.html">
    <meta property="twitter:title" content="免费在线文件压缩工具 - 轻松压缩各类文件">
    <meta property="twitter:description" content="支持PDF、图片、视频等多种格式，批量压缩处理，显著减小文件体积。完全免费，无需注册！">
    <meta property="twitter:image" content="https://tools.xiaolu.com/images/file-compressor-twitter.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "在线文件压缩工具",
        "url": "https://tools.xiaolu.com/tools/file-compressor.html",
        "description": "专业的在线文件压缩工具，支持多种格式，批量处理，保持质量的同时显著减小文件体积",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "All",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "支持PDF文档压缩",
            "支持图片压缩",
            "支持视频压缩",
            "批量文件处理",
            "智能压缩算法",
            "保持文件质量",
            "完全免费使用",
            "注重隐私保护"
        ]
    }
    </script>
     
    <!-- 导航栏和页脚组件 -->
    <script src="../components/navbar.js"></script>
    <script src="../components/footer.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4cc9f0;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .tool-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 16px;
            color: white;
        }
        
        .tool-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .tool-header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .feature-tags {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }
        
        .feature-tag {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .upload-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .upload-zone {
            border: 2px dashed var(--primary);
            border-radius: 12px;
            padding: 3rem 2rem;
            margin: 2rem 0;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .upload-zone:hover {
            background: rgba(67, 97, 238, 0.05);
        }
        
        .upload-zone i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .upload-zone p {
            color: var(--gray);
        }
        
        .file-list {
            margin-top: 2rem;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .file-icon {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .file-details h3 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }
        
        .file-details p {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .file-actions button {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            padding: 0.5rem;
            transition: var(--transition);
        }
        
        .file-actions button:hover {
                color: var(--primary);
            }

            /* 进度条样式 */
            .progress-bar {
                width: 100%;
                height: 4px;
                background-color: #e9ecef;
                border-radius: 2px;
                margin-top: 8px;
                overflow: hidden;
            }

            .progress {
                width: 0;
                height: 100%;
                background-color: var(--primary);
                transition: width 0.3s ease;
            }

            /* 压缩状态样式 */
            .file-item.compressing {
                background-color: #fff3cd;
            }

            .file-item.compressed {
                background-color: #d4edda;
            }

            .file-item.error {
                background-color: #f8d7da;
            }
        
        .compress-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 2rem auto;
        }
        
        .compress-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .compress-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* 压缩设置样式 */
        .compression-settings {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: var(--shadow);
            border: 2px solid #e9ecef;
        }
        
        .compression-settings h3 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .setting-group {
            margin-bottom: 1.5rem;
        }
        
        .setting-group label {
            display: block;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        
        .compression-slider-container,
        .quality-slider-container {
            position: relative;
            margin-bottom: 0.5rem;
        }
        
        .compression-slider,
        .quality-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e9ecef;
            outline: none;
            -webkit-appearance: none;
        }
        
        .compression-slider::-webkit-slider-thumb,
        .quality-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .compression-slider::-moz-range-thumb,
        .quality-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .compression-info,
        .quality-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
        }
        
        .compression-info span:first-child,
        .quality-info span:first-child {
            font-weight: 600;
            color: var(--primary);
        }
        
        .compression-desc,
        .quality-desc {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* 压缩进度样式 */
        .compression-progress {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: var(--shadow);
            border: 2px solid #e3f2fd;
        }
        
        .compression-progress h3 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .progress-container {
            margin-bottom: 1.5rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 6px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .progress-text span:first-child {
            font-weight: 600;
            color: var(--primary);
        }
        
        .progress-text span:last-child {
            color: var(--gray);
        }
        
        .file-progress-list {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .file-progress-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .file-progress-item:last-child {
            border-bottom: none;
        }
        
        .file-progress-name {
            flex: 1;
            font-size: 0.9rem;
            color: var(--dark);
            margin-right: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .file-progress-status {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .file-progress-status.waiting {
            background: #f8f9fa;
            color: var(--gray);
        }
        
        .file-progress-status.processing {
            background: #fff3cd;
            color: #856404;
        }
        
        .file-progress-status.completed {
            background: #d4edda;
            color: #155724;
        }
        
        .file-progress-status.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .guide-section,
        .features-section,
        .faq-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .guide-steps {
            display: grid;
            gap: 1.5rem;
        }
        
        .guide-step {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }
        
        .step-number {
            background: var(--primary);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .feature-item {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }
        
        .feature-item i {
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .faq-item {
            margin-bottom: 1.5rem;
        }
        
        .faq-question {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        
        .faq-answer {
            color: var(--gray);
        }
        
        .support-links {
            text-align: center;
            margin: 2rem 0;
        }
        
        .support-links a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .support-links a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 1rem auto;
            }
            
            .tool-header {
                padding: 1.5rem;
            }
            
            .tool-header h1 {
                font-size: 2rem;
            }
            
            .feature-tag {
                font-size: 0.8rem;
            }
            
            .upload-zone {
                padding: 2rem 1rem;
            }
            
            .file-item {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .file-info {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .file-actions {
                display: flex;
                justify-content: center;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tool-header">
            <h1>在线文件压缩工具</h1>
            <p>专业的文件压缩工具，支持PDF、图片、视频等多种格式，批量压缩处理，显著减小文件体积的同时保持原有质量</p>
            <div class="feature-tags">
                <div class="feature-tag">
                    <i class="fas fa-file-pdf"></i>
                    <span>PDF压缩</span>
                </div>
                <div class="feature-tag">
                    <i class="fas fa-image"></i>
                    <span>图片压缩</span>
                </div>
                <div class="feature-tag">
                    <i class="fas fa-video"></i>
                    <span>视频压缩</span>
                </div>
                <div class="feature-tag">
                    <i class="fas fa-layer-group"></i>
                    <span>批量处理</span>
                </div>
            </div>
        </div>

        <div class="upload-section">
            <h2>开始压缩您的文件</h2>
            <div class="upload-zone" id="dropZone">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>拖放文件到这里或点击上传</h3>
                <p>支持PDF、JPG、PNG、MP4等格式，单个文件最大100MB</p>
                <input type="file" id="fileInput" multiple style="display: none">
            </div>
            
            <div class="file-list" id="fileList">
                <!-- 文件列表将通过JavaScript动态生成 -->
            </div>
            
            <!-- 压缩设置 -->
            <div class="compression-settings" id="compressionSettings" style="display: none;">
                <h3><i class="fas fa-cog"></i> 压缩设置</h3>
                <div class="setting-group">
                    <label for="compressionLevel">压缩级别：</label>
                    <div class="compression-slider-container">
                        <input type="range" id="compressionLevel" min="1" max="4" value="2" class="compression-slider">
                        <div class="slider-labels">
                            <span>低</span>
                            <span>中</span>
                            <span>高</span>
                            <span>极高</span>
                        </div>
                    </div>
                    <div class="compression-info">
                        <span id="compressionLevelValue">2 (中)</span>
                        <span class="compression-desc">在压缩速度和效果之间取得平衡</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="imageQuality">图片质量：</label>
                    <div class="quality-slider-container">
                        <input type="range" id="imageQuality" min="10" max="90" value="80" class="quality-slider">
                        <div class="slider-labels">
                            <span>10%</span>
                            <span>50%</span>
                            <span>90%</span>
                        </div>
                    </div>
                    <div class="quality-info">
                        <span id="imageQualityValue">80%</span>
                        <span class="quality-desc">推荐设置，平衡质量和文件大小</span>
                    </div>
                </div>
            </div>
            
            <!-- 压缩进度 -->
            <div class="progress-container" id="progressContainer" style="display: none;">
                <h3><i class="fas fa-spinner fa-spin"></i> 压缩进度</h3>
                <div class="overall-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="overallProgress"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progressPercent">0%</span>
                        <span id="progressStatus">准备中...</span>
                    </div>
                </div>
                <div class="file-progress-list" id="fileProgressList">
                    <!-- 单个文件进度将动态生成 -->
                </div>
            </div>
            
            <button class="compress-btn" id="compressBtn" disabled>
                <i class="fas fa-compress-alt"></i>
                开始压缩
            </button>
        </div>

        <div class="guide-section">
            <h2 class="section-title">
                <i class="fas fa-book"></i>
                使用指南
            </h2>
            <div class="guide-steps">
                <div class="guide-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>选择文件</h3>
                        <p>点击上传区域或直接拖放文件，支持批量上传多个文件</p>
                    </div>
                </div>
                <div class="guide-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>开始压缩</h3>
                        <p>点击"开始压缩"按钮，系统将自动优化压缩每个文件</p>
                    </div>
                </div>
                <div class="guide-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>下载文件</h3>
                        <p>压缩完成后，点击下载按钮获取压缩后的文件</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="features-section">
            <h2 class="section-title">
                <i class="fas fa-star"></i>
                为什么选择我们的压缩工具？
            </h2>
            <div class="feature-grid">
                <div class="feature-item">
                    <i class="fas fa-compress"></i>
                    <div>
                        <h3>智能压缩</h3>
                        <p>采用先进的压缩算法，在保持质量的同时最大程度减小文件体积</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i>
                    <div>
                        <h3>安全可靠</h3>
                        <p>文件在本地处理，不上传服务器，确保数据安全和隐私</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-bolt"></i>
                    <div>
                        <h3>快速处理</h3>
                        <p>优化的处理流程，快速完成文件压缩</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-globe"></i>
                    <div>
                        <h3>全平台支持</h3>
                        <p>支持各种设备和浏览器，随时随地使用</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="features-section">
            <h2 class="section-title">
                <i class="fas fa-list-check"></i>
                核心功能
            </h2>
            <div class="feature-grid">
                <div class="feature-item">
                    <i class="fas fa-file-pdf"></i>
                    <div>
                        <h3>PDF压缩</h3>
                        <p>智能压缩PDF文件，保持文档质量和可读性</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-image"></i>
                    <div>
                        <h3>图片压缩</h3>
                        <p>支持JPG、PNG等格式，保持清晰度的同时减小体积</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-video"></i>
                    <div>
                        <h3>视频压缩</h3>
                        <p>压缩视频文件，保持画质的同时优化文件大小</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-layer-group"></i>
                    <div>
                        <h3>批量处理</h3>
                        <p>同时处理多个文件，提高工作效率</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="features-section">
            <h2 class="section-title">
                <i class="fas fa-lightbulb"></i>
                应用场景
            </h2>
            <div class="feature-grid">
                <div class="feature-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                        <h3>邮件附件</h3>
                        <p>压缩文件以符合邮件附件大小限制</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-cloud"></i>
                    <div>
                        <h3>云存储优化</h3>
                        <p>减小文件体积，节省云存储空间</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-mobile-alt"></i>
                    <div>
                        <h3>移动设备</h3>
                        <p>优化文件以适应移动设备存储</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-globe"></i>
                    <div>
                        <h3>网站优化</h3>
                        <p>压缩网站资源，提升加载速度</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="faq-section">
            <h2 class="section-title">
                <i class="fas fa-question-circle"></i>
                常见问题
            </h2>
            <div class="faq-item">
                <div class="faq-question">Q：压缩后的文件质量会受影响吗？</div>
                <div class="faq-answer">A：我们采用智能压缩算法，在最大程度减小文件体积的同时，尽可能保持原有的质量。对于图片和视频，您可以选择压缩级别来平衡质量和文件大小。</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Q：支持哪些文件格式？</div>
                <div class="faq-answer">A：目前支持以下格式：
                    <br>- 文档：PDF
                    <br>- 图片：JPG、PNG、WebP
                    <br>- 视频：MP4、WebM
                    <br>我们会持续增加对更多格式的支持。</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Q：文件大小有限制吗？</div>
                <div class="faq-answer">A：为了确保最佳性能，单个文件大小限制为500MB。如果您需要处理更大的文件，建议先将文件分割后再进行压缩。</div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Q：压缩过程需要多长时间？</div>
                <div class="faq-answer">A：压缩时间取决于文件大小和类型。一般情况下，几MB的文件只需要几秒钟。大文件可能需要更长时间，建议耐心等待。</div>
            </div>
        </div>

        <!-- 工具详细介绍 -->
        <div class="tool-info">
            <h2 class="info-title">@2025工具详细介绍</h2>
            <div class="info-content">
                <p>在线文件压缩工具是小路工具箱推出的一款专业文件优化工具，专为需要处理大文件的用户设计。无论是PDF文档、图片还是视频文件，都能实现快速高效的压缩。</p>
            </div>
        </div>

        <!-- 技术支持 -->
        <div class="support-links">
            <h3>技术支持和问题反馈</h3>
            <p>如果您在使用过程中遇到问题或有改进建议，欢迎通过以下方式联系我们：</p>
            <p><a href="https://t.zsxq.com/17wTksRxX" target="_blank">点击这里获取技术支持和问题反馈</a></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化导航栏和页脚组件
            const navbar = new NavbarComponent();
            const navbarStyles = document.createElement('style');
            navbarStyles.textContent = NavbarComponent.getStyles();
            document.head.appendChild(navbarStyles);

            const footer = new FooterComponent();
            const footerStyles = document.createElement('style');
            footerStyles.textContent = FooterComponent.getStyles();
            document.head.appendChild(footerStyles);

            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            const compressBtn = document.getElementById('compressBtn');
            let files = [];

            // 处理文件拖放
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.backgroundColor = 'rgba(67, 97, 238, 0.1)';
            });

            dropZone.addEventListener('dragleave', () => {
                dropZone.style.backgroundColor = '';
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.backgroundColor = '';
                const newFiles = Array.from(e.dataTransfer.files);
                handleFiles(newFiles);
            });

            // 处理文件选择
            dropZone.addEventListener('click', () => {
                fileInput.click();
            });

            fileInput.addEventListener('change', (e) => {
                const newFiles = Array.from(e.target.files);
                handleFiles(newFiles);
            });

            // 处理文件
            function handleFiles(newFiles) {
                newFiles.forEach(file => {
                    if (file.size > 500 * 1024 * 1024) {
                        alert('文件大小不能超过500MB');
                        return;
                    }
                    
                    if (!isFileTypeSupported(file.type)) {
                        alert('不支持的文件类型');
                        return;
                    }
                    
                    files.push(file);
                });
                
                updateFileList();
                compressBtn.disabled = files.length === 0;
            }

            // 检查文件类型
            function isFileTypeSupported(type) {
                const supportedTypes = [
                    'application/pdf',
                    'image/jpeg',
                    'image/png',
                    'image/webp',
                    'video/mp4',
                    'video/webm'
                ];
                return supportedTypes.includes(type);
            }

            // 更新文件列表
            function updateFileList() {
                fileList.innerHTML = '';
                files.forEach((file, index) => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                        <div class="file-info">
                            <i class="file-icon ${getFileIcon(file.type)}"></i>
                            <div class="file-details">
                                <h3>${file.name}</h3>
                                <p>${formatFileSize(file.size)}</p>
                            </div>
                        </div>
                        <div class="file-actions">
                            <button onclick="removeFile(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    fileList.appendChild(fileItem);
                });
            }

            // 获取文件图标
            function getFileIcon(type) {
                if (type.includes('pdf')) return 'fas fa-file-pdf';
                if (type.includes('image')) return 'fas fa-file-image';
                if (type.includes('video')) return 'fas fa-file-video';
                return 'fas fa-file';
            }

            // 格式化文件大小
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 B';
                const k = 1024;
                const sizes = ['B', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            // 移除文件
            window.removeFile = function(index) {
                files.splice(index, 1);
                updateFileList();
                compressBtn.disabled = files.length === 0;
            };

            // 创建Web Worker处理文件压缩
            const compressWorker = new Worker('../workers/compress-worker.js');

            // 监听Worker消息
            compressWorker.onmessage = function(e) {
                const { type, data } = e.data;
                switch(type) {
                    case 'progress':
                        updateProgress(data.fileIndex, data.progress);
                        break;
                    case 'complete':
                        handleCompressComplete(data.compressedFile, data.originalFile);
                        break;
                    case 'error':
                        handleError(data.message, data.fileIndex);
                        break;
                }
            };

            // 更新进度条
            function updateProgress(fileIndex, progress) {
                // 更新文件列表中的进度
                const fileItem = fileList.children[fileIndex];
                if (fileItem) {
                    let progressBar = fileItem.querySelector('.progress-bar');
                    if (!progressBar) {
                        progressBar = document.createElement('div');
                        progressBar.className = 'progress-bar';
                        progressBar.innerHTML = '<div class="progress"></div>';
                        fileItem.querySelector('.file-info').appendChild(progressBar);
                    }
                    progressBar.querySelector('.progress').style.width = `${progress}%`;
                }

                // 更新进度容器中的文件进度
                const progressElement = document.getElementById(`progress-${fileIndex}`);
                const progressText = document.getElementById(`progress-text-${fileIndex}`);
                if (progressElement) {
                    progressElement.style.width = `${progress}%`;
                }
                if (progressText) {
                    progressText.textContent = `${Math.round(progress)}%`;
                }

                // 计算总体进度
                updateOverallProgress();
            }

            // 更新总体进度
            function updateOverallProgress() {
                const totalFiles = files.length;
                if (totalFiles === 0) return;

                let totalProgress = 0;
                for (let i = 0; i < totalFiles; i++) {
                    const progressElement = document.getElementById(`progress-${i}`);
                    if (progressElement) {
                        const width = progressElement.style.width;
                        const progress = parseFloat(width) || 0;
                        totalProgress += progress;
                    }
                }

                const overallProgressPercent = totalProgress / totalFiles;
                overallProgress.style.width = `${overallProgressPercent}%`;
            }

            // 处理压缩完成
            function handleCompressComplete(compressedFile, originalFile) {
                const index = files.findIndex(f => f.name === originalFile.name);
                if (index !== -1) {
                    const fileItem = fileList.children[index];
                    if (fileItem) {
                        const downloadBtn = document.createElement('button');
                        downloadBtn.innerHTML = '<i class="fas fa-download"></i>';
                        downloadBtn.title = '下载压缩文件';
                        downloadBtn.onclick = () => downloadFile(compressedFile);
                        fileItem.querySelector('.file-actions').appendChild(downloadBtn);

                        const compressionRatio = ((1 - compressedFile.size / originalFile.size) * 100).toFixed(1);
                        const sizeInfo = fileItem.querySelector('.file-details p');
                        sizeInfo.innerHTML = `原始大小: ${formatFileSize(originalFile.size)}<br>压缩后: ${formatFileSize(compressedFile.size)} (减小${compressionRatio}%)`;
                    }
                }
            }

            // 处理错误
            function handleError(message) {
                alert(`压缩出错: ${message}`);
            }

            // 下载文件
            function downloadFile(file) {
                const url = URL.createObjectURL(file);
                const a = document.createElement('a');
                a.href = url;
                a.download = `compressed_${file.name}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            // 压缩设置相关元素
            const compressionLevelSlider = document.getElementById('compressionLevel');
            const compressionLevelValue = document.getElementById('compressionLevelValue');
            const imageQualitySlider = document.getElementById('imageQuality');
            const imageQualityValue = document.getElementById('imageQualityValue');
            const progressContainer = document.getElementById('progressContainer');
            const overallProgress = document.getElementById('overallProgress');
            const progressStatus = document.getElementById('progressStatus');
            const fileProgressList = document.getElementById('fileProgressList');

            // 更新压缩级别显示
            compressionLevelSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                compressionLevelValue.textContent = value;
                
                const levels = ['低', '中', '高', '极高'];
                const levelText = levels[value - 1] || '中';
                compressionLevelValue.textContent = `${value} (${levelText})`;
            });

            // 更新图片质量显示
            imageQualitySlider.addEventListener('input', (e) => {
                const value = e.target.value;
                imageQualityValue.textContent = `${value}%`;
            });

            // 压缩按钮点击事件
            compressBtn.addEventListener('click', () => {
                if (files.length === 0) return;

                // 显示进度容器
                progressContainer.style.display = 'block';
                progressStatus.textContent = '准备压缩...';
                overallProgress.style.width = '0%';
                fileProgressList.innerHTML = '';

                // 获取压缩设置
                const compressionLevel = parseInt(compressionLevelSlider.value);
                const imageQuality = parseInt(imageQualitySlider.value) / 100;

                // 创建文件进度项
                files.forEach((file, index) => {
                    const fileItem = fileList.children[index];
                    if (fileItem) {
                        // 更新状态为压缩中
                        fileItem.classList.add('compressing');
                        // 禁用删除按钮
                        const deleteBtn = fileItem.querySelector('.file-actions button');
                        if (deleteBtn) deleteBtn.disabled = true;
                    }

                    // 在进度列表中添加文件项
                    const progressItem = document.createElement('div');
                    progressItem.className = 'file-progress-item';
                    progressItem.innerHTML = `
                        <span class="file-name">${file.name}</span>
                        <div class="progress-bar">
                            <div class="progress" id="progress-${index}"></div>
                        </div>
                        <span class="progress-text" id="progress-text-${index}">0%</span>
                    `;
                    fileProgressList.appendChild(progressItem);

                    // 发送压缩任务到Worker
                    compressWorker.postMessage({
                        file,
                        index,
                        options: {
                            quality: imageQuality,
                            compressionLevel: compressionLevel,
                            maxWidth: compressionLevel >= 3 ? 1280 : 1920,
                            maxHeight: compressionLevel >= 3 ? 720 : 1080
                        }
                    });
                });

                // 禁用压缩按钮和设置
                compressBtn.disabled = true;
                compressionLevelSlider.disabled = true;
                imageQualitySlider.disabled = true;
                progressStatus.textContent = `正在压缩 ${files.length} 个文件...`;
            });

            // 更新处理压缩完成的函数
            function handleCompressComplete(compressedFile, originalFile) {
                const index = files.findIndex(f => f.name === originalFile.name);
                if (index !== -1) {
                    const fileItem = fileList.children[index];
                    if (fileItem) {
                        // 移除压缩中状态
                        fileItem.classList.remove('compressing');
                        // 添加压缩完成状态
                        fileItem.classList.add('compressed');

                        const downloadBtn = document.createElement('button');
                        downloadBtn.innerHTML = '<i class="fas fa-download"></i>';
                        downloadBtn.title = '下载压缩文件';
                        downloadBtn.onclick = () => downloadFile(compressedFile);
                        fileItem.querySelector('.file-actions').appendChild(downloadBtn);

                        const compressionRatio = ((1 - compressedFile.size / originalFile.size) * 100).toFixed(1);
                        const sizeInfo = fileItem.querySelector('.file-details p');
                        sizeInfo.innerHTML = `原始大小: ${formatFileSize(originalFile.size)}<br>压缩后: ${formatFileSize(compressedFile.size)} (减小${compressionRatio}%)`;
                    }

                    // 更新进度为100%
                    updateProgress(index, 100);

                    // 更新进度文本
                    const progressText = document.getElementById(`progress-text-${index}`);
                    if (progressText) {
                        progressText.textContent = '完成';
                        progressText.style.color = '#4CAF50';
                    }

                    // 检查是否所有文件都已处理完成
                    const allCompleted = Array.from(fileList.children).every(item => 
                        item.classList.contains('compressed') || item.classList.contains('error')
                    );

                    if (allCompleted) {
                        // 重新启用控件
                        compressBtn.disabled = false;
                        compressionLevelSlider.disabled = false;
                        imageQualitySlider.disabled = false;
                        
                        // 更新状态文本
                        progressStatus.textContent = '压缩完成！';
                        progressStatus.style.color = '#4CAF50';
                        
                        // 3秒后隐藏进度容器
                        setTimeout(() => {
                            progressContainer.style.display = 'none';
                            progressStatus.style.color = '';
                        }, 3000);
                    }
                }
            }

            // 更新处理错误的函数
            function handleError(message, fileIndex) {
                if (fileIndex !== undefined) {
                    const fileItem = fileList.children[fileIndex];
                    if (fileItem) {
                        // 移除压缩中状态
                        fileItem.classList.remove('compressing');
                        // 添加错误状态
                        fileItem.classList.add('error');
                        // 启用删除按钮
                        const deleteBtn = fileItem.querySelector('.file-actions button');
                        if (deleteBtn) deleteBtn.disabled = false;
                    }

                    // 更新进度文本
                    const progressText = document.getElementById(`progress-text-${fileIndex}`);
                    if (progressText) {
                        progressText.textContent = '错误';
                        progressText.style.color = '#f44336';
                    }

                    // 更新进度条为红色
                    const progressElement = document.getElementById(`progress-${fileIndex}`);
                    if (progressElement) {
                        progressElement.style.backgroundColor = '#f44336';
                        progressElement.style.width = '100%';
                    }
                }

                alert(`压缩出错: ${message}`);

                // 检查是否所有文件都已处理完成
                const allCompleted = Array.from(fileList.children).every(item => 
                    item.classList.contains('compressed') || item.classList.contains('error')
                );

                if (allCompleted) {
                    // 重新启用控件
                    compressBtn.disabled = false;
                    compressionLevelSlider.disabled = false;
                    imageQualitySlider.disabled = false;
                    
                    // 更新状态文本
                    progressStatus.textContent = '压缩完成（部分文件出错）';
                    progressStatus.style.color = '#ff9800';
                    
                    // 3秒后隐藏进度容器
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        progressStatus.style.color = '';
                    }, 3000);
                }
            }

            // 禁用腾讯统计相关请求
            const originalFetch = window.fetch;
            window.fetch = function(url, options) {
                if (url.includes('beacon.qq.com') || url.includes('h.trace.qq.com')) {
                    return Promise.resolve(new Response());
                }
                return originalFetch.apply(this, arguments);
            };
        });
    </script>
</body>
</html>